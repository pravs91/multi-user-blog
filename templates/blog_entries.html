{% extends "base.html" %}

{% block content %}
    {% if user %}
        <div class="new-post-link">
            <a href="/blog/newpost">New Post</a>
        </div>
        <div class="my-posts">
            <a href="/blog/welcome">My Posts</a>
        </div>
    {% endif %}

    {% block title %}
    {% endblock %}
    {% for entry in blog_entries %}
        <div class="post">
            <div class="post-heading">
                <div class="post-title">{{entry.subject}}</div>
                <div class="post-date">{{entry.created.strftime("%b %d, %Y")}}</div>
                <div class="post-user">Created by {{entry.user.username}}</div>
            </div>
            <pre width="30" class="post-content">{{entry.content | safe}}</pre>
            {% if entry.user.username == user.username %}
                <button class="edit-btn" onclick="edit({{entry.key().id()}})">Edit</button>
                <button class="delete-btn" onclick="remove({{entry.key().id()}})">Delete</button>
            {% endif %}
        </div>
        <br>
    {% endfor %}
    <script type="text/javascript">
        function edit(id){
            window.location.href = '/blog/' + id + '/edit';
        }
        function remove(id){
            window.location.href = "/blog/" + id + '/delete';
        }
    </script>
{% endblock %}
